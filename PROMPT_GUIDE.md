# LinkSell Prompt ä½¿ç”¨æŒ‡å— (v2.4)

æœ¬æ–‡æ¡£è¯¦ç»†è®°å½•æ‰€æœ‰ prompt æ–‡ä»¶çš„åŠŸèƒ½ã€ä½¿ç”¨åœºæ™¯ã€è°ƒç”¨æ–¹å¼å’Œå‚æ•°è¯´æ˜ã€‚

---

## ğŸ“Š æ€»è§ˆè¡¨

| Action | Prompt æ–‡ä»¶ | æ ¸å¿ƒåŠŸèƒ½ | è°ƒç”¨åœ°ç‚¹ | è¿”å›ç±»å‹ |
|--------|----------|--------|--------|---------|
| **CREATE** | `create_sales.txt` | ä»æ–‡æœ¬ç”Ÿæˆç»“æ„åŒ– JSON å•†æœºæ•°æ® | `controller.analyze()` | JSON å¯¹è±¡ |
| **GET** | `query_sales.txt` | æ ¹æ®ç°æœ‰ JSON å›ç­”å…·ä½“æŸ¥è¯¢ | `controller.query()` (æ–°å¢) | çº¯æ–‡æœ¬ç­”æ¡ˆ |
| **LIST** | `query_sales.txt` | æ ¹æ® JSON åˆ—è¡¨å›ç­”åˆ—è¡¨æŸ¥è¯¢ | `controller.query()` (æ–°å¢) | çº¯æ–‡æœ¬ç­”æ¡ˆ |
| **UPDATE** | `update_sales.txt` | æ ¹æ®è‡ªç„¶è¯­è¨€ä¿®æ”¹ JSON | `controller.update()` | JSON å¯¹è±¡ |
| **DELETE** | `delete_confirmation.txt` | åˆ é™¤å‰ç”ŸæˆäºŒæ¬¡ç¡®è®¤æç¤º | `controller.delete()` (æ–°å¢) | çº¯æ–‡æœ¬æç¤º |
| **OTHER** | (æ— ) | è¿”å›ç§˜ä¹¦è¯­æ°”æ‹’ç» | CLI/GUI | éšæœºè¯­æ–™ |

---

## ğŸ”§ è¯¦ç»†è¯´æ˜

### 1. CREATE - `create_sales.txt` (åŸ analyze_sales.txt)

**åŠŸèƒ½**: å°†ç”¨æˆ·çš„å£è¿°/æ–‡æœ¬è½¬æ¢ä¸ºç»“æ„åŒ–çš„é”€å”®å•†æœº JSON

**è°ƒç”¨æ–¹å¼**:
```python
# controller.py
polished_text = self.polish(user_input)
sales_data = self.analyze(polished_text)  # å†…éƒ¨è°ƒç”¨ create_sales.txt
```

**è¾“å…¥**:
- ç”¨æˆ·çš„æ–‡æœ¬/å£è¿°å†…å®¹ï¼ˆå·²ç»è¿‡ `polish_text.txt` æ¶¦è‰²ï¼‰

**è¾“å‡º**:
```json
{
  "record_type": "chat|meeting",
  "sales_rep": "é”€å”®åå­—",
  "summary": "æ‘˜è¦",
  "customer_info": {...},
  "project_opportunity": {...},
  "key_points": [...],
  "action_items": [...],
  "sentiment": "..."
}
```

**å…³é”®æ³¨æ„**:
- å¦‚æœå­—æ®µæ— æ³•æ¨æ–­ï¼Œè¿”å› `null` æˆ–ç©ºåˆ—è¡¨
- `project_opportunity.project_name` å¿…é¡»æ§åˆ¶åœ¨ 15 å­—ä»¥å†…

---

### 2. GET/LIST - `query_sales.txt`

**åŠŸèƒ½**: åŸºäºç°æœ‰çš„å•†æœº JSONï¼Œä¸“ä¸šåœ°å›ç­”ç”¨æˆ·çš„æŸ¥è¯¢é—®é¢˜

**è°ƒç”¨æ–¹å¼**:
```python
# controller.py (æ–°å¢æ–¹æ³•)
def query(self, sales_data: dict, query_text: str) -> str:
    """æ ¹æ® sales_data å’ŒæŸ¥è¯¢é—®é¢˜ï¼Œç”Ÿæˆå›ç­”"""
    # è°ƒç”¨ query_sales.txt
```

**è¾“å…¥**:
- `sales_data`: å•ä¸ªå•†æœº JSON æˆ–å•†æœºåˆ—è¡¨
- `query_text`: ç”¨æˆ·çš„æŸ¥è¯¢é—®é¢˜ï¼ˆä» `extracted_content` è·å–ï¼‰

**è¾“å‡º**:
```
ä¸€æ®µä¸“ä¸šçš„çº¯æ–‡æœ¬å›ç­”ï¼ŒåŒ…æ‹¬ï¼š
- ç›´æ¥ç­”æ¡ˆï¼ˆå¿…é¡»ï¼‰
- ç›¸å…³èƒŒæ™¯ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
- ä¸‹ä¸€æ­¥å»ºè®®ï¼ˆå¯é€‰ï¼‰
```

**ä½¿ç”¨åœºæ™¯**:
- GETï¼šç”¨æˆ·æƒ³çœ‹æŸä¸€ä¸ªå•†æœºçš„è¯¦æƒ… â†’ å•ä¸ª JSON + æŸ¥è¯¢é—®é¢˜
- LISTï¼šç”¨æˆ·æƒ³çœ‹å¤šä¸ªå•†æœºå¹¶æŒ‰æ¡ä»¶ç­›é€‰ â†’ åˆ—è¡¨ JSON + ç­›é€‰é—®é¢˜

---

### 3. UPDATE - `update_sales.txt` + `refine_sales.txt` (èåˆæµç¨‹)

**æ¶æ„å˜åŒ–**: UPDATE æµç¨‹ç°åœ¨é‡‡ç”¨"æ™ºèƒ½ä¿®æ”¹ + å³æ—¶è´¨æ£€"çš„ä¸¤å±‚æ¨¡å‹ã€‚

#### **åŠŸèƒ½ 3.1**: `update_sales.txt` - è‡ªç„¶è¯­è¨€ä¿®æ”¹ + æ™ºèƒ½è´¨æ£€ï¼ˆèåˆç‰ˆï¼‰

**èŒè´£** (é‡æ–°å®šä¹‰):
1. **è§£æä¿®æ”¹æŒ‡ä»¤**ï¼šç†è§£ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€ï¼Œæ‹†åˆ†å‡ºè¢«ä¿®æ”¹å­—æ®µå’Œæ–°å€¼
2. **å³æ—¶è´¨æ£€**ï¼ˆæ–°å¢ï¼‰ï¼šåœ¨ä¿®æ”¹æ—¶å°±å¯¹æ–°å€¼è¿›è¡ŒéªŒè¯å’Œæ ¼å¼åŒ–
3. **æ ¼å¼è§„èŒƒåŒ–**ï¼š
   - é¢„ç®—ï¼š`"ä¸‰ä¸‡äº”"` â†’ `"3.5ä¸‡"`ï¼Œ`"5ç™¾ä¸‡"` â†’ `"500ä¸‡"`
   - æ—¶é—´ï¼š`"å¯åŠ¨"` â†’ `"é¢„è®¡ä¸‹æœˆå¯åŠ¨"`
   - é˜¶æ®µï¼š`"è°ˆåˆ¤ä¸­"` â†’ `2` (æ•°å­—)
   - æµç¨‹ï¼š`"æ‹›æ ‡"` â†’ `"å…¬å¼€æ‹›æ ‡"`ï¼ˆè½¬æ¢ä¸ºæ ‡å‡†æœ¯è¯­ï¼‰
4. **åˆ—è¡¨æ“ä½œ**ï¼šæ”¯æŒ"æ·»åŠ "ã€"åˆ é™¤"ã€"æ›¿æ¢"æ“ä½œ

**è°ƒç”¨æ–¹å¼**:
```python
# controller.py
updated_data = self.update(original_data, user_instruction)
# å†…éƒ¨è°ƒç”¨ update_sales.txtï¼ˆèåˆç‰ˆï¼‰
```

**è¾“å…¥**:
```json
{
  "original_json": {...},
  "user_instruction": "æŠŠé¢„ç®—æ”¹æˆ50ä¸‡å¹¶æ·»åŠ ç«äº‰å¯¹æ‰‹ABCå…¬å¸"
}
```

**è¾“å‡º** (è´¨æ£€åçš„å®Œæ•´ JSON):
```json
{
  "project_opportunity": {
    "budget": "50ä¸‡",  // å·²éªŒè¯æ ¼å¼
    "competitors": ["åŸæœ‰å¯¹æ‰‹", "ABCå…¬å¸"],  // å·²å»é‡
    ...
  },
  ...
}
```

**è´¨æ£€è§„åˆ™åˆ—è¡¨**:
| å­—æ®µ | è¾“å…¥ç¤ºä¾‹ | è¾“å‡ºï¼ˆè´¨æ£€åï¼‰ |
|------|---------|------------|
| budget | "ä¸‰ä¸‡äº”" | "3.5ä¸‡" |
| budget | "5ç™¾ä¸‡" | "500ä¸‡" |
| timeline | "å¯åŠ¨" | "é¢„è®¡ä¸‹æœˆå¯åŠ¨" |
| opportunity_stage | "è°ˆåˆ¤ä¸­" | 3 |
| procurement_process | "æ‹›æ ‡" | "å…¬å¼€æ‹›æ ‡" |
| project_name | "è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„é¡¹ç›®åç§°å•¦" | "è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„é¡¹..." (15å­—ä»¥å†…) |
| competitors | "æ·»åŠ Aå…¬å¸" | ["åŸæœ‰å¯¹æ‰‹", "Aå…¬å¸"] |

#### **ç‰¹æ®Šé€»è¾‘ï¼šå•†æœºåç§°é‡å‘½åçš„åŸå­æ“ä½œ**

å½“ç”¨æˆ·ä¿®æ”¹ `project_name`ï¼ˆå•†æœºåç§°ï¼‰æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡Œ **ä¸‰å±‚åŒæ­¥**ï¼š

```
ç”¨æˆ·æŒ‡ä»¤: "æ”¹åå«æ²ˆé˜³è½´æ‰¿å‚æ——èˆ°åº—"
         â†“
Step 1: update_sales.txt ä¿®æ”¹ JSON
  - æ›´æ–° project_opportunity.project_name
         â†“
Step 2: controller.update() æ£€æµ‹åç§°å˜åŒ–
  - æ£€æµ‹ï¼šæ—§åç§° â‰  æ–°åç§°
         â†“
Step 3: åŸå­æ“ä½œï¼ˆä¸‰å±‚åŒæ­¥ï¼‰
  1ï¸âƒ£ JSON æ–‡ä»¶é‡å‘½å
     æ—§: data/opportunities/åŸé¡¹ç›®å.json
     æ–°: data/opportunities/æ²ˆé˜³è½´æ‰¿å‚æ——èˆ°åº—.json
  
  2ï¸âƒ£ å‘é‡æ•°æ®åº“æ›´æ–°
     åˆ é™¤: æ—§é¡¹ç›®åçš„å‘é‡è®°å½•
     æ·»åŠ : æ–°é¡¹ç›®åçš„å‘é‡è®°å½•
     (ID ä¿æŒä¸å˜)
  
  3ï¸âƒ£ å…ƒæ•°æ®åŒæ­¥
     æ›´æ–°: _file_path æŒ‡å‘æ–°æ–‡ä»¶è·¯å¾„
         â†“
è¾“å‡º: æ›´æ–°åçš„ JSONï¼ˆå¸¦æ–°çš„ _file_pathï¼‰
```


**å…³é”®ç‰¹æ€§**:
- âœ… **åŸå­æ€§**ï¼šä¸‰ä¸ªæ“ä½œåŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ï¼Œæ— ä¸­é—´æ€
- âœ… **ID ä¸å˜**ï¼šå•†æœºçš„å”¯ä¸€æ ‡è¯†ç¬¦ä¿æŒä¸å˜ï¼Œä»…é‡æ–°ç¼–ç´¢å¼•
- âœ… **å®‰å…¨åˆ é™¤**ï¼šæ—§æ–‡ä»¶åªåœ¨æ–°æ–‡ä»¶å†™å…¥æˆåŠŸåæ‰åˆ é™¤
- âœ… **è‡ªåŠ¨å¤„ç†**ï¼šç”¨æˆ·æ— éœ€æ‰‹åŠ¨æ“ä½œï¼Œç³»ç»Ÿè‡ªåŠ¨å®Œæˆ
- âš ï¸ **å¼‚å¸¸å¤„ç†**ï¼šå¦‚æœé‡å‘½åå¤±è´¥ï¼Œè¿”å›æ›´æ–°çš„æ•°æ®ä½†æ‰“å°è­¦å‘Šï¼Œç”¨æˆ·å¯æ‰‹åŠ¨å¤„ç†

---

### åŠŸèƒ½ 3.2: `refine_sales.txt` - çº¯æ•°æ®æ¸…æ´—ï¼ˆç‹¬ç«‹æ¨¡å¼ï¼‰

**èŒè´£** (é‡æ–°å®šä¹‰):
- `refine_sales.txt` ç°åœ¨æ˜¯"çº¯æ¸…æ´å·¥"è§’è‰²ï¼Œä»…ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
  1. **ç¼ºå¤±å­—æ®µè¡¥å……**ï¼šç”¨æˆ·æ‰‹åŠ¨å¡«å†™ç¼ºå¤±çš„å­—æ®µå€¼
  2. **POST-CREATE æ¸…æ´—**ï¼šCREATE åçš„é¢å¤–æ¸…æ´—æ­¥éª¤
  3. **ç‹¬ç«‹çš„æ‰¹é‡æ¸…æ´—**ï¼šå¯¹å·²æœ‰æ•°æ®çš„å­—æ®µå€¼è¿›è¡Œç»Ÿä¸€è§„èŒƒåŒ–

**è°ƒç”¨æ–¹å¼**:
```python
# controller.py
# åœºæ™¯ 1ï¼šç¼ºå¤±å­—æ®µè¡¥å……ï¼ˆCREATE åï¼‰
cleaned_data = self.refine(original_data, user_supplements)

# åœºæ™¯ 2ï¼šUPDATE åçš„äºŒæ¬¡æ¸…æ´—ï¼ˆå¯é€‰ï¼‰
if needs_post_cleaning:
    cleaned_data = self.refine(updated_data, {})  # ä»…ç”¨äºæ ¼å¼è§„èŒƒåŒ–
```

**è¾“å…¥**:
```json
{
  "original_json": {...},
  "user_supplements": {
    "budget": "ç”¨æˆ·ç›´æ¥è¾“å…¥çš„åŸå§‹å€¼",
    "timeline": "ç”¨æˆ·ç›´æ¥è¾“å…¥çš„åŸå§‹å€¼"
  }
}
```

**è¾“å‡º** (æ ¼å¼åŒ–åçš„ JSON):
```json
{
  ...
  "project_opportunity": {
    "budget": "3.5ä¸‡",  // æ ¼å¼åŒ–
    "timeline": "é¢„è®¡ä¸‹æœˆå¯åŠ¨",  // è§„èŒƒåŒ–
    ...
  }
}
```

**èŒè´£åˆ†ç¦»å¯¹æ¯”**:

| æµç¨‹ | update_sales.txt (èåˆ) | refine_sales.txt (çº¯æ¸…æ´) |
|------|------------------------|-----------------------|
| **ä½•æ—¶è°ƒç”¨** | UPDATE æµç¨‹ä¸­ | CREATE å / ç‹¬ç«‹æ‰¹é‡æ¸…æ´— |
| **è¾“å…¥æ–¹å¼** | è‡ªç„¶è¯­è¨€æŒ‡ä»¤ + JSON | å­—æ®µå€¼å­—å…¸ + JSON |
| **æ ¸å¿ƒä»»åŠ¡** | ç†è§£ä¿®æ”¹æ„å›¾ + è´¨æ£€ | çº¯æ ¼å¼åŒ–å’Œæ ¡éªŒ |
| **æ˜¯å¦ä¿®æ”¹å­—æ®µ** | âœ… æ˜¯ï¼ˆæ ¹æ®æŒ‡ä»¤ï¼‰ | âŒ å¦ï¼ˆä»…è§„èŒƒåŒ–ç°æœ‰å€¼ï¼‰ |
| **å¤„ç†åˆ—è¡¨å­—æ®µ** | âœ… æ”¯æŒæ·»åŠ /åˆ é™¤ | âœ… ä»…è§„èŒƒåŒ– |
| **ä¾‹å­** | "æ·»åŠ ç«äº‰å¯¹æ‰‹A" | `{"competitors": "A, B"}` â†’ `["A", "B"]` |

**æµç¨‹é¡ºåº**:
1. **è¯†åˆ«æ„å›¾** â†’ UPDATE
2. **è°ƒç”¨ `update_sales.txt`** ä¿®æ”¹ + å³æ—¶è´¨æ£€
3. **[å¯é€‰] è¡¥å……ç¼ºå¤±å­—æ®µ** â†’ è°ƒç”¨ `refine_sales.txt` æ¸…æ´—
4. **review ç¡®è®¤** â†’ save

---



**æµç¨‹é¡ºåº**:
1. è¯†åˆ«æ„å›¾ â†’ UPDATE
2. è°ƒç”¨ `update_sales.txt` ä¿®æ”¹
3. æ˜¾ç¤ºä¿®æ”¹ç»“æœç»™ç”¨æˆ·
4. å¦‚æœç”¨æˆ·è¦è¡¥å……å­—æ®µ â†’ è°ƒç”¨ `refine_sales.txt` æ¸…æ´—

---

### 4. DELETE - `delete_confirmation.txt`

**åŠŸèƒ½**: åœ¨åˆ é™¤å‰ç”Ÿæˆå‹å¥½ä½†ä¸¥è‚ƒçš„äºŒæ¬¡ç¡®è®¤æç¤º

**è°ƒç”¨æ–¹å¼**:
```python
# controller.py (æ–°å¢æ–¹æ³•)
def generate_delete_warning(self, sales_data: dict) -> str:
    """æ ¹æ®è¦åˆ é™¤çš„æ•°æ®ç”Ÿæˆç¡®è®¤æç¤º"""
    # è°ƒç”¨ delete_confirmation.txt
```

**è¾“å…¥**:
```
JSON æ ¼å¼çš„å®Œæ•´å•†æœºæ•°æ®
```

**è¾“å‡º**:
```
ä¸€æ®µçº¯æ–‡æœ¬çš„ç¡®è®¤æç¤ºï¼ŒåŒ…æ‹¬ï¼š
- è¦åˆ é™¤çš„å…³é”®ä¿¡æ¯æ‘˜è¦ï¼ˆé¡¹ç›®åã€å®¢æˆ·ã€é‡‘é¢ï¼‰
- è­¦å‘Šï¼šåˆ é™¤ä¸å¯é€†
- å»ºè®®ç”¨æˆ·ç¡®è®¤
```

**ä½¿ç”¨åœºæ™¯**:
```
ç”¨æˆ·è¾“å…¥ DELETE æ„å›¾ â†’ å®šä½ç›®æ ‡å•†æœº â†’ è°ƒç”¨æ­¤ prompt ç”Ÿæˆè­¦å‘Š â†’ ç”¨æˆ·ç¡®è®¤ â†’ æ‰§è¡Œåˆ é™¤
```

---

### 5. OTHER - (æ— ä¸“ç”¨ prompt)

**åŠŸèƒ½**: æ‹’ç»éä¸šåŠ¡è¯·æ±‚ï¼Œè¿”å›ç§˜ä¹¦è¯­æ°”çš„å›å¤

**è°ƒç”¨æ–¹å¼**:
```python
# cli/interface.py å’Œ gui/app.py
add_ai_message(get_ui_text("intent_other_hint", default_message))
# ä» ui_templates.json çš„ "intent_other_hint" ä¸­éšæœºé€‰æ‹©
```

**è¿”å›**:
- ä» `config/ui_templates.json` çš„ `intent_other_hint` æ•°ç»„ä¸­éšæœºé€‰æ‹©ä¸€å¥

**ç¤ºä¾‹è¯­æ–™**:
```json
"intent_other_hint": [
  "æŠ±æ­‰ï¼Œè¿™è¶…å‡ºäº†æˆ‘çš„ä¸šåŠ¡èŒƒå›´ã€‚æˆ‘æ˜¯ä¸“é—¨ä¸ºæ‚¨æ•´ç†é”€å”®è®°å½•æˆ–æŸ¥è¯¢å†å²æ•°æ®çš„...",
  "ç›®å‰æˆ‘ä¸»è¦è´Ÿè´£é”€å”®æ•°æ®çš„é‡‡é›†ä¸åˆ†æï¼Œæš‚ä¸æ”¯æŒæ­¤ç±»å’¨è¯¢...",
  "æœ¯ä¸šæœ‰ä¸“æ”»ï¼Œæˆ‘ä¸“æ³¨äºé”€å”®è¾…åŠ©å·¥ä½œ...",
  "ä½œä¸ºä¸€ä¸ªé”€å”®åŠ©æ‰‹ï¼Œæˆ‘æ›´æ“…é•¿å¤„ç†ä¸šåŠ¡ç›¸å…³çš„è¯é¢˜..."
]
```

---

## ğŸ”„ è¾…åŠ© Prompt (é¢„å¤„ç†å’Œåå¤„ç†)

| æ–‡ä»¶å | ç”¨é€” | è°ƒç”¨ä½ç½® |
|--------|------|--------|
| `classify_intent.txt` | æ„å›¾åˆ†ç±» + å†…å®¹æå– | `controller.identify_intent()` é¢„å¤„ç† |
| `polish_text.txt` | æ–‡æœ¬æ¶¦è‰² | CREATE æµç¨‹çš„ç¬¬ä¸€æ­¥ |
| `normalize_input.txt` | è¾“å…¥è§„èŒƒåŒ– | ç”¨æˆ·æ‰‹åŠ¨è¡¥å……å­—æ®µæ—¶æ¸…æ´— |
| `judge_save.txt` | å¸ƒå°”åˆ¤å®š | åˆ¤æ–­ç”¨æˆ·è‚¯å®š/å¦å®š |
| `summarize_note.txt` | é•¿æ–‡æœ¬æ€»ç»“ | å¯é€‰ï¼šç”¨äº CREATE å‰çš„é¢„å¤„ç† |
| `extract_search_term.txt` | å®ä½“æå–ï¼ˆå·²åºŸå¼ƒï¼‰ | âŒ å·²æ•´åˆåˆ° `classify_intent.txt` |

---

## ğŸ“ Controller å‡½æ•°ç­¾åå‚è€ƒ

```python
# ç°æœ‰å‡½æ•°ï¼ˆéœ€è¦ä¿è¯å·¥ä½œæ­£å¸¸ï¼‰
def analyze(self, text: str) -> dict:
    """CREATE: æ–‡æœ¬ â†’ JSON"""
    
def update(self, original: dict, instruction: str) -> dict:
    """UPDATE: JSON + æŒ‡ä»¤ â†’ ä¿®æ”¹å JSON"""
    
def refine(self, original: dict, supplements: dict) -> dict:
    """UPDATE è¾…åŠ©: JSON + è¡¥å…… â†’ æ¸…æ´—å JSON"""

# æ–°å¢å‡½æ•°ï¼ˆéœ€è¦å®ç°ï¼‰
def query(self, sales_data: dict|list, query_text: str) -> str:
    """GET/LIST: JSON + æŸ¥è¯¢ â†’ æ–‡æœ¬ç­”æ¡ˆ"""
    
def generate_delete_warning(self, sales_data: dict) -> str:
    """DELETE: JSON â†’ ç¡®è®¤æç¤º"""
```

---

## ğŸ¯ æµç¨‹ç¤ºä¾‹

### CREATE å®Œæ•´æµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ classify_intent (è¿”å› CREATE + content)
  â†“
polish_text (æ¶¦è‰²è¾“å…¥)
  â†“
analyze/create_sales.txt (ç”Ÿæˆ JSON)
  â†“
get_missing_fields (æ£€æŸ¥ç¼ºå¤±å­—æ®µ)
  â†“
é€å­—æ®µè¡¥å…… â†’ refine_sales.txt (æ¸…æ´—è¡¥å……)
  â†“
review ç¡®è®¤ â†’ save
```

### UPDATE å®Œæ•´æµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ classify_intent (è¿”å› UPDATE + content)
  â†“
find_potential_matches (å®šä½ç›®æ ‡)
  â†“
update_sales.txt (æ ¹æ®æŒ‡ä»¤ä¿®æ”¹ JSON)
  â†“
[å¯é€‰] è¡¥å……ç¼ºå¤±å­—æ®µ â†’ refine_sales.txt
  â†“
review ç¡®è®¤ â†’ save
```

### DELETE å®Œæ•´æµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ classify_intent (è¿”å› DELETE + content)
  â†“
find_potential_matches (å®šä½ç›®æ ‡)
  â†“
delete_confirmation.txt (ç”Ÿæˆè­¦å‘Šæç¤º)
  â†“
ç”¨æˆ·ç¡®è®¤ â†’ execute_delete
```

### GET/LIST æµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ classify_intent (è¿”å› GET/LIST + content)
  â†“
[GET] find_potential_matches (å®šä½å•ä¸ªç›®æ ‡)
[LIST] list_opportunities (è¿”å›åˆ—è¡¨)
  â†“
query_sales.txt (ç”Ÿæˆä¸“ä¸šå›ç­”)
  â†“
å±•ç¤ºç­”æ¡ˆ
```

---

## âš ï¸ é‡è¦çº¦å®š

1. **JSON å®Œæ•´æ€§**: æ‰€æœ‰è¿”å› JSON çš„ prompt å¿…é¡»è¿”å›å®Œæ•´ã€æœ‰æ•ˆçš„ JSONï¼ŒåŒ…æ‹¬ `null` å€¼
2. **ä¸è¿”å› Markdown**: prompt æ˜ç¡®è¦æ±‚"ä»…è¿”å› JSONï¼Œä¸è¦ Markdown æ ‡è®°"
3. **Template å˜é‡**: ä½¿ç”¨ `{{variable}}` æ ¼å¼ï¼Œç”± Python ä»£ç è´Ÿè´£æ›¿æ¢
4. **é”™è¯¯å¤„ç†**: LLM è‹¥è¿”å›éé¢„æœŸæ ¼å¼ï¼Œcontroller åº”æœ‰ fallback é€»è¾‘
5. **å†…å®¹æå–**: æ‰€æœ‰ ACTION handler å¿…é¡»ä½¿ç”¨ `identify_intent` è¿”å›çš„ `content` å­—æ®µï¼Œè€ŒéåŸå§‹ `user_input`

---

## ğŸ“Œ å‘½åçº¦å®š

| æ¦‚å¿µ | å‘½å | è¯´æ˜ |
|------|------|------|
| ç”¨æˆ·åŸå§‹è¾“å…¥ | `user_input` æˆ– `prompt` | å®Œæ•´çš„åŸå§‹æ–‡æœ¬ |
| æå–çš„å†…å®¹ | `extracted_content` | å·²å»æ‰æ„å›¾å…³é”®è¯çš„å†…å®¹ |
| é”€å”®æ•°æ® | `sales_data` æˆ– `opportunity` | JSON æ ¼å¼çš„å•†æœºè®°å½• |
| ä¿®æ”¹æŒ‡ä»¤ | `user_instruction` | ç”¨æˆ·çš„ä¿®æ”¹æè¿° |
| æŸ¥è¯¢é—®é¢˜ | `query_text` | ç”¨æˆ·çš„æŸ¥è¯¢é—®é¢˜ |

---

*æœ€åæ›´æ–°: 2026-01-19*
